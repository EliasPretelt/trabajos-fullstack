const resultado=document.getElementById("resultado"),subPantalla=document.getElementById("sub"),garbash=document.getElementById("garbash"),contenedorHistorial=document.getElementById("conthis"),contTeclas=document.getElementById("cont-teclas"),res=document.getElementById("reset");function operadores2(ope){let res=parseFloat(resultado.innerText),vacio=resultado.innerText;switch(ope){case"←":resultado.innerText=resultado.innerText.slice(0,resultado.innerText.length-1);break;case"%":resultado.innerText=res/100;break;case"√":res>0&&(resultado.innerText=Math.sqrt(res).toFixed(2));break;case"x²":resultado.innerText=Math.pow(res,2).toFixed(2);break;case"mm":!(vacio>0)||vacio.includes("+")||vacio.includes("-")||vacio.includes("÷")||vacio.includes("x")||(resultado.innerText="-"+resultado.innerText),!0!==vacio.includes("-")||vacio.includes("+")||vacio.includes("÷")||vacio.includes("x")||(resultado.innerText=resultado.innerText.slice(1,resultado.innerText.length))}}function igual(){let na=document.getElementById("resultado").innerHTML,suma=na.includes("+"),resta=na.includes("-"),mul=na.includes("x"),mul2=na.includes("x")&&na.includes("-"),div=na.includes("÷"),div2=na.includes("÷")&&na.includes("-"),res;if(suma)arr=na.split("+",2),res=parseFloat(arr[0])+parseFloat(arr[1]),resultado.innerHTML=parseFloat(res).toFixed(2);else if(resta){let com=na.split("");"-"===na[0]?(arr=na.split("-",3),""==arr[0]&&(res=parseFloat(na.split("-")[1])+parseFloat(na.split("-")[2]),resultado.innerHTML="-"+parseFloat(res).toFixed(2))):(arr=na.split("-",2),res=parseFloat(arr[0])-parseFloat(arr[1]),resultado.innerHTML=parseFloat(res).toFixed(2))}else mul?(arr=na.split("x",2),res=parseFloat(arr[0])*parseFloat(arr[1]),resultado.innerHTML=parseFloat(res).toFixed(2)):div&&(arr=na.split("÷",2),res=parseFloat(arr[0])/parseFloat(arr[1]),resultado.innerHTML=parseFloat(res).toFixed(2));mul2&&(arr=na.split("x",2),res="-"+parseFloat(-1*arr[0])*parseFloat(arr[1]),resultado.innerText=parseFloat(res).toFixed(2)),div2&&(arr=na.split("÷",2),res="-"+parseFloat(-1*arr[0])/parseFloat(arr[1]),resultado.innerText=parseFloat(res).toFixed(2));let datos=document.createElement("p");datos.className="ope";let resul=document.createElement("p");resul.className="resu";let divP=document.createElement("div");datos.innerText=na,resul.innerText=resultado.innerText,divP.appendChild(datos),divP.appendChild(resul),contenedorHistorial.insertBefore(divP,contenedorHistorial.firstChild),subPantalla.innerText=na,garbash.style.opacity="1"}contTeclas.addEventListener("click",e=>{if(e.target.classList.contains("btn-num")){let na=document.getElementById("resultado").innerHTML;resultado.innerHTML=na+e.target.value,0==na&&(resultado.innerText=e.target.value),subPantalla.innerText+=e.target.value}if(e.target.classList.contains("btn-ope")){let na=document.getElementById("resultado").innerHTML,ultimo=na.split("")[na.split("").length-1];ultimo===e.target.value||isNaN(parseFloat(ultimo))||(resultado.innerHTML=na+e.target.value,subPantalla.innerText+=e.target.value)}e.target.classList.contains("btn-ope2")&&operadores2(e.target.value)}),res.addEventListener("click",()=>{resultado.innerHTML=0,subPantalla.innerText=""}),garbash.addEventListener("click",()=>{contenedorHistorial.innerHTML="",garbash.style.opacity="0"});